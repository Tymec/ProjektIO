import{d as r,a as m,l as I}from"./index.75fe17d4.js";import{a as W,b as B}from"./index.387c5579.js";import{e as d,h as g}from"./index.2a0622e3.js";import{d as G,o as R,a as H,b as j}from"./store.a5458181.js";import"./hoisted.1689e95d.js";import"./hoisted.193e1478.js";import"./lazy.20e115a3.js";import"./signals.module.b63af230.js";import"./preact.module.f85bee2d.js";import"./hooks.module.6c5b4c2f.js";import"./preload-helper.87151e19.js";function P(){import.meta.url,import("data:text/javascript,").catch(()=>1);async function*t(){}P.g=t}const _=(t,e)=>{if(+__PN_DATA__.uid<=0)return e&&e();t()};let p=null;const v=()=>{if(p)return p;const t=document.querySelector("[data-closest]");return p=Object.assign({},t==null?void 0:t.dataset),p};r("click","[data-downld-name]",function(){const t=this.dataset.downldName,e=this.dataset.downldUrl,n=this.dataset.downldSuffix,o=this.dataset.hueid,s=v();if(!t)return;const i=document.getElementById("GoPremiumBtn"),a=document.querySelector('._zF[data-modal="MyDeviceLimitMoadl"]');_(()=>{if(o&&d(o),a&&t!="premium")return a==null||a.classList.remove("_ce"),!1;switch(t){case"png":case"rar":case"ppt":case"twibbon":const l=s.fee=="1"&&t==="png";G({type:s.type||"1",btnType:t,rarName:n||"PSD",goPremiumTxt:(i==null?void 0:i.textContent)||"Go Premium",href:e,downUrl:e,fee:l},!1);break;case"edit":e&&window.open(e,"_blank");break;case"mobile":const u=document.querySelector("._IA");u&&(u.__top__=u.__top__||u.getBoundingClientRect().top-40+W(),B(u.__top__));break;default:e&&setTimeout(()=>{window.open(e,"_blank")},100);break}},()=>{d("down-btnnologin")})});r("click","[data-share-btn]",function(){const t=this.dataset.shareBtn,e=location.origin+location.pathname,n=U();switch(t){case"pinterest":j(e+"?share=3",n.media,n.word);break;case"facebook":H(e+"?share=2");break;case"twitter":R(e+"?share=1",n.title);break}});function U(){const t={title:"",media:"",word:""},e=document.querySelector("[data-share-media]");if(e){const{shareTitle:n,shareMedia:o,shareWord:s}=e.dataset;t.title=n||"",t.media=o||"",t.word=s||""}return t}const O="._EF";r("click",O,function(){setTimeout(()=>{d("der-followmain")}),_(()=>{const t=this.dataset.follow,e=this.textContent,n=this.dataset.txt;this.disabled=!0,g.post("/api/async/designer-follow",{id:t}).then(o=>{o.status===200&&(this.textContent=n,this.dataset.txt=e)}).finally(()=>{this.disabled=!1})})});const z="._NA a";r("click","[data-prf-type]",function(){const e=this.dataset.prfType==="enterprise",n=e?"team":"";_(()=>{+__PN_DATA__.vip_type<=0?(m(document,"dialog:toggle",{name:"prf-license",show:!0}),d("prfview-btn"+n)):(this.disabled=!0,m(document,"down:prf",{data:v(),isTeam:e,resolve:()=>{this.disabled=!1},reject:()=>{this.disabled=!1}}),d("prfdown-btn"+n))})});r("click",z,function(t){t.preventDefault(),d("relatekeyword-report"),this.href&&setTimeout(()=>{window.open(this.href,"_blank")},100)});const M="._KB ._OE";r("click",M,function(){const t=this.dataset.id;t&&d(`url-similartype-${t}`)});r("click","._VA>span",function(){m(this.parentElement.querySelector('[data-huejs="der-linkmain"]'),"click")});const $="._EG",V="._FG",J="._GG",K=["_g","_Tn"];Q();function Q(){if(window.innerWidth<1024)return;const t=document.querySelectorAll($);for(const e of t){const n=e.querySelector(V),o=e.querySelector(J);if(!n||!o)continue;const s=Array.from(n.children).filter(D=>D!==o),i=s.length;if(i<=1)continue;const a=X(s,i);if(a.length<=1)continue;const l=getComputedStyle(o,null),{i:u,data:f}=Y(a[1],{box_w:n.offsetWidth,btn_w:o.offsetWidth,btns:s,mx:(parseFloat(l.marginLeft)||0)+parseFloat(l.marginRight)||0,next:null,show:!1}),y=i-u,A="+"+y,F=o.dataset.less,N=e.offsetHeight,L=n.offsetHeight,b=()=>{f.show=!1,o.textContent=A,o.style.removeProperty("width"),n.insertBefore(o,f.next),e.style.cssText+=`height:${N}px;`};I(o,"click",()=>{if(f.show)return b();f.show=!0,n.appendChild(o),o.textContent=F,o.style.width="auto",e.style.cssText+=`height:${L}px;`}),b(),y>0&&requestAnimationFrame(()=>{o.classList.remove(...K)})}}function X(t,e){const n=t[0].offsetLeft,o=[];let s=0;for(let i=0;i<e;i++){const a=t[i];a.offsetLeft===n&&o.push({el:a,i,w:s});const l=getComputedStyle(a,null);s+=a.offsetWidth+(parseFloat(l.marginLeft)||0)+(parseFloat(l.marginRight)||0)}return o}function Y(t,e){const{box_w:n,btn_w:o,mx:s,btns:i}=e,a=o+s;if(e.next=t.el,t.w+a>n){const l=i.slice(0,t.i);for(t.i--;t.w-=l[t.i].offsetWidth+s,!(t.w+a<=n);)t.i--;e.next=l[t.i]}return{i:t.i,data:e}}const C="._uF",Z="._IG",x=()=>{m(document,"dialog:toggle",{name:"PreviewImage",show:!0})},k=t=>{var e;(e=document.querySelector(Z))==null||e.classList[t?"add":"remove"]("_ce")},w=t=>{t.preventDefault()};r("click",C,function(t){w(t),setTimeout(()=>{d("detail-preview-image")},100);const e=document.getElementById("PreviewImage");if(e){if(e.querySelector("img"))return x()}else return;const n=this.querySelector("a"),o=this.querySelector("img");if(!n||!o)return;const s=n.href||o.currentSrc||o.src;if(!s)return;x();const i=n.offsetHeight>n.parentElement.offsetHeight,a=document.createElement("img"),l=i?e:a;l.style.maxWidth=window.innerWidth-40+"px",l.style.maxHeight=window.innerHeight-120+"px",a.className=e.dataset.imgClass||"",a.style.minWidth=i?"640px":"auto",a.alt="",a.oncontextmenu=w,a.onload=a.onabort=a.onerror=()=>{requestAnimationFrame(()=>{k(!0)})},a.src=s,requestAnimationFrame(()=>{k(),e.appendChild(a)})});r("contextmenu",C,w);const T='input[name="prfRealName"],input[name="prfCompanyName"]',S="_JB",tt="._PG label",c={},q="sorry,there are some problems,please contract us...";document.addEventListener("down:prf",t=>{Object.assign(c,t.detail),nt()});r("input",T,function(){this.parentElement.querySelector("span").hidden=!!this.value});let h=null;r("click",tt,function(){this.classList.add(S),h=this},()=>{h&&(h.classList.remove(S),h=null)});r("click","._QG",function(){const t=et();if(t){this.disabled=!0;const e="/api/message/vrf-name"+(c.isTeam?"-team":""),n={name:t.prfRealName,company_name:t.prfCompanyName,...c.data};(()=>c.isTeam?g.post(e,n):g.get(e,n))().then(s=>{this.disabled=!1,E(!1),s.status==1&&s.url?window.open(s.url,"_blank"):s.status==404&&alert(q)}).catch(()=>{this.disabled=!1})}});function et(){const t=document.querySelectorAll(T),e=new Set,n={};for(const o of t){const s=o.value.trim();o.parentElement.classList[s?"remove":"add"]("_vH"),s?n[o.name]=s:e.add(0)}return e.size?null:n}function E(t){m(document,"dialog:toggle",{name:"prfActualName",show:t})}async function nt(){const t=c.data;if(!t)return;const e="/api/message/vrf-file"+(c.isTeam?"-team":"");g.get(e,{id:t.id,type:t.type,controller:t.controller}).then(n=>{if(n.status==1&&n.url)window.open(n.url,"_blank");else if(!c.isTeam&&n.status==2)alert("sorry,you cannot download personal PRF");else if(n.status==404)alert(q);else{if(n.name){const o=document.querySelector('input[name="prfRealName"]');o&&(o.value=n.name)}E(!0)}}).then(c.resolve).catch(c.reject).finally(()=>{delete c.resolve,delete c.reject})}export{P as __vite_legacy_guard};